<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DORAEMON-AI</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=El+Messiri:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <style>
    :root {
      --primary-color: #84cc16;
      --secondary-color: #ecfccb;
      --tertiary-color: #65a30d;
      --text-color: #1a3c34;
    }

    body {
      font-family: 'El Messiri', sans-serif;
      background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
    }

    .popup, .modal, .theme-modal, .settings-modal {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: #FFFFFF;
      padding: 2rem;
      border-radius: 1rem;
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
      z-index: 1000;
      border: 2px solid var(--primary-color);
      max-width: 90%;
      width: 350px;
    }

    .card {
      transition: all 0.3s ease;
      background: #FFFFFF;
      border-radius: 12px;
      border: 1px solid var(--secondary-color);
    }

    .card:hover {
      transform: translateY(-8px) scale(1.02);
      box-shadow: 0 15px 25px rgba(0, 0, 0, 0.15);
    }

    .gradient-bg {
      background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
    }

    svg {
      width: 70%;
      height: auto;
      overflow: visible;
      margin: 0 auto;
      display: block;
    }

    svg text {
      font-family: 'El Messiri', sans-serif;
      text-anchor: middle;
      dominant-baseline: middle;
      text-transform: uppercase;
      animation: stroke 5s infinite alternate;
      stroke-width: 1;
      stroke: var(--primary-color);
      font-size: 80px;
      fill: rgba(255, 255, 255, 0);
    }

    @keyframes stroke {
      0% { fill: rgba(255, 255, 255, 0); stroke: var(--primary-color); stroke-dashoffset: 25%; stroke-dasharray: 0 50%; stroke-width: 2; }
      70% { fill: rgba(255, 255, 255, 0); stroke: var(--secondary-color); }
      80% { fill: rgba(255, 255, 255, 0); stroke: var(--tertiary-color); stroke-width: 3; }
      100% { fill: #FFFFFF; stroke: rgba(0, 0, 0, 0); stroke-dashoffset: -25%; stroke-dasharray: 50% 0; stroke-width: 0; }
    }

    .history-container {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      padding: 1rem;
      width: 100%;
      max-width: 100%;
    }

    .history-item {
      transition: all 0.3s ease;
      width: 100%;
      max-width: 600px;
      margin: 0 auto;
    }

    .history-item:hover {
      background: var(--secondary-color);
      transform: scale(1.02);
    }

    .delete-btn {
      color: var(--primary-color);
    }

    .delete-btn:hover {
      color: var(--tertiary-color);
      transform: scale(1.1);
    }

    @keyframes bounceIn {
      0% { transform: scale(0.8); opacity: 0; }
      60% { transform: scale(1.05); opacity: 1; }
      100% { transform: scale(1); }
    }

    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }

    @keyframes win-bounce {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.15); }
    }

    @keyframes loss-shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-4px); }
      50% { transform: translateX(4px); }
      75% { transform: translateX(-4px); }
    }

    .toast {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: var(--primary-color);
      color: var(--text-color);
      padding: 12px 24px;
      border-radius: 8px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
      z-index: 1000;
      animation: toast-slide 3s ease-in-out forwards;
    }

    @keyframes toast-slide {
      0% { bottom: -50px; opacity: 0; }
      10% { bottom: 20px; opacity: 1; }
      90% { bottom: 20px; opacity: 1; }
      100% { bottom: -50px; opacity: 0; }
    }

    .nav-container {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: var(--primary-color);
      padding: 0.5rem;
      display: flex;
      justify-content: space-around;
      align-items: center;
      box-shadow: 0 -2px 5px rgba(0, 0, 0, 0.2);
      z-index: 1000;
    }

    .nav-button {
      display: flex;
      flex-direction: column;
      align-items: center;
      color: var(--text-color);
      padding: 0.5rem;
      border-radius: 8px;
      transition: all 0.3s ease;
      animation: nav-bounce 0.5s ease-in-out;
    }

    .nav-button:hover {
      background: var(--secondary-color);
      transform: translateY(-3px);
      box-shadow: 0 3px 8px rgba(0, 0, 0, 0.2);
    }

    .nav-button.active {
      background: var(--tertiary-color);
      color: white;
    }

    .nav-button i {
      font-size: 1.5rem;
      margin-bottom: 0.25rem;
    }

    .nav-button span {
      font-size: 0.75rem;
      font-weight: 600;
    }

    .nav-button.bounce {
      animation: bounce 0.6s ease;
    }

    .nav-button.pulse {
      animation: pulse 0.6s ease;
    }

    .nav-button.tada {
      animation: tada 0.6s ease;
    }

    .nav-button.swing {
      animation: swing 0.6s ease;
    }

    @keyframes nav-bounce {
      0% { transform: translateY(10px); opacity: 0; }
      60% { transform: translateY(-3px); opacity: 1; }
      100% { transform: translateY(0); }
    }

    @keyframes bounce {
      0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
      40% { transform: translateY(-10px); }
      60% { transform: translateY(-5px); }
    }

    @keyframes tada {
      0% { transform: scale(1); }
      10%, 20% { transform: scale(0.9) rotate(-3deg); }
      30%, 50%, 70%, 90% { transform: scale(1.1) rotate(3deg); }
      40%, 60%, 80% { transform: scale(1.1) rotate(-3deg); }
      100% { transform: scale(1) rotate(0); }
    }

    @keyframes swing {
      20% { transform: rotate(15deg); }
      40% { transform: rotate(-10deg); }
      60% { transform: rotate(5deg); }
      80% { transform: rotate(-5deg); }
      100% { transform: rotate(0deg); }
    }

    .theme-modal, .settings-modal {
      animation: zoomIn 0.4s ease-in-out;
      max-width: 90%;
      width: 350px;
    }

    .theme-option, .settings-option {
      display: flex;
      align-items: center;
      padding: 0.75rem;
      margin: 0.5rem 0;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
      animation: slideInLeft 0.3s ease-in-out forwards;
    }

    .theme-option:nth-child(2), .settings-option:nth-child(2) { animation-delay: 0.1s; }
    .theme-option:nth-child(3), .settings-option:nth-child(3) { animation-delay: 0.2s; }
    .theme-option:nth-child(4), .settings-option:nth-child(4) { animation-delay: 0.3s; }
    .theme-option:nth-child(5), .settings-option:nth-child(5) { animation-delay: 0.4s; }
    .theme-option:nth-child(6), .settings-option:nth-child(6) { animation-delay: 0.5s; }
    .theme-option:nth-child(7), .settings-option:nth-child(7) { animation-delay: 0.6s; }
    .theme-option:nth-child(8), .settings-option:nth-child(8) { animation-delay: 0.7s; }
    .theme-option:nth-child(9), .settings-option:nth-child(9) { animation-delay: 0.8s; }
    .theme-option:nth-child(10), .settings-option:nth-child(10) { animation-delay: 0.9s; }
    .theme-option:nth-child(11), .settings-option:nth-child(11) { animation-delay: 1.0s; }

    .theme-option:hover, .settings-option:hover {
      background: var(--secondary-color);
      transform: scale(1.05) rotate(2deg);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
      animation: rubberBand 0.6s ease;
    }

    .theme-option span, .settings-option i {
      width: 24px;
      height: 24px;
      border-radius: 50%;
      margin-right: 1rem;
      transition: transform 0.3s ease;
    }

    .theme-option:hover span, .settings-option:hover i {
      transform: scale(1.2);
    }

    @keyframes zoomIn {
      0% { transform: translate(-50%, -50%) scale(0); opacity: 0; }
      60% { transform: translate(-50%, -50%) scale(1.1); opacity: 1; }
      100% { transform: translate(-50%, -50%) scale(1); }
    }

    @keyframes slideInLeft {
      0% { transform: translateX(-50px); opacity: 0; }
      100% { transform: translateX(0); opacity: 1; }
    }

    @keyframes rubberBand {
      0% { transform: scale(1); }
      30% { transform: scaleX(1.25) scaleY(0.75); }
      40% { transform: scaleX(0.75) scaleY(1.25); }
      60% { transform: scaleX(1.15) scaleY(0.85); }
      100% { transform: scale(1); }
    }

    .theme-sunset {
      --primary-color: #ff6b6b;
      --secondary-color: #ffe5d9;
      --tertiary-color: #d9480f;
      --text-color: #2b1a10;
    }

    .theme-ocean {
      --primary-color: #219ebc;
      --secondary-color: #a3e4ff;
      --tertiary-color: #126782;
      --text-color: #023047;
    }

    .theme-forest {
      --primary-color: #2d6a4f;
      --secondary-color: #d8f3dc;
      --tertiary-color: #1b4332;
      --text-color: #081c15;
    }

    .theme-midnight {
      --primary-color: #2c3e50;
      --secondary-color: #ecf0f1;
      --tertiary-color: #34495e;
      --text-color: #bdc3c7;
    }

    .theme-neon {
      --primary-color: #ff00ff;
      --secondary-color: #1e1e1e;
      --tertiary-color: #00ffff;
      --text-color: #ffffff;
    }

    .theme-pastel {
      --primary-color: #ffcccb;
      --secondary-color: #f4f1de;
      --tertiary-color: #81ecec;
      --text-color: #3d405b;
    }

    .theme-volcano {
      --primary-color: #d32f2f;
      --secondary-color: #ffebee;
      --tertiary-color: #b71c1c;
      --text-color: #3e2723;
    }

    .theme-cloud {
      --primary-color: #b0c4de;
      --secondary-color: #f5faff;
      --tertiary-color: #6b7280;
      --text-color: #2d3748;
    }

    .theme-lavender {
      --primary-color: #d8b4fe;
      --secondary-color: #f3e8ff;
      --tertiary-color: #a78bfa;
      --text-color: #4c1d95;
    }

    .theme-citrus {
      --primary-color: #f7e05e;
      --secondary-color: #fffbeb;
      --tertiary-color: #facc15;
      --text-color: #3f3f46;
    }

    .hidden {
      display: none;
    }

    .settings-option {
      justify-content: space-between;
    }

    .settings-option p {
      flex-grow: 1;
    }

    .settings-option .fa-check {
      color: var(--primary-color);
    }

    .settings-option .fa-ban {
      color: var(--tertiary-color);
    }
  </style>
</head>
<body class="min-h-screen flex flex-col">
  <div class="w-full">
    <header class="text-center mt-0 mb-2">
      <svg viewBox="0 0 800 200">
        <text x="50%" y="50%">DORAEMONDORA</text>
      </svg>
    </header>

    <div class="max-w-full mx-auto p-4 w-full">
      <div class="max-w-4xl mx-auto p-5 w-full" id="mainContent">
        <!-- Period & Prediction Card -->
        <div class="card mb-5 overflow-hidden gradient-bg" id="predictionCard">
          <div class="bg-white bg-opacity-90 p-5 rounded-lg">
            <div class="grid grid-cols-2 gap-3 sm:gap-5">
              <div class="relative">
                <div class="absolute top-0 left-0 w-1.5 h-full bg-[var(--primary-color)] rounded-l-lg"></div>
                <div class="pl-3 sm:pl-4">
                  <div class="flex items-center space-x-1 sm:space-x-2 mb-1 sm:mb-2">
                    <i class="fas fa-calendar-alt text-lg sm:text-xl text-[var(--primary-color)] animate-pulse"></i>
                    <h2 class="text-sm sm:text-lg font-bold text-[var(--text-color)]">Period</h2>
                  </div>
                  <p id="currentPeriod" class="text-lg sm:text-2xl font-semibold text-[var(--text-color)] bg-[var(--secondary-color)] p-2 sm:p-3 rounded-lg">-</p>
                </div>
              </div>
              <div class="relative text-right">
                <div class="absolute top-0 right-0 w-1.5 h-full bg-[var(--primary-color)] rounded-r-lg"></div>
                <div class="pr-3 sm:pr-4">
                  <div class="flex items-center justify-end space-x-1 sm:space-x-2 mb-1 sm:mb-2">
                    <h2 class="text-sm sm:text-lg font-bold text-[var(--text-color)]">Prediction</h2>
                    <i class="fas fa-lightbulb text-lg sm:text-xl text-[var(--primary-color)] animate-pulse"></i>
                  </div>
                  <p id="currentPrediction" class="text-lg sm:text-2xl font-semibold text-[var(--text-color)] bg-[var(--secondary-color)] p-2 sm:p-3 rounded-lg">-</p>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Analysis Dashboard Card -->
        <div class="card mb-6 p-6" id="dashboardCard">
          <h2 class="text-2xl font-bold text-[var(--text-color)] text-center mb-6 relative">
            <span class="relative z-10">Analysis Dashboard</span>
            <span class="absolute top-1/2 left-0 w-full h-1 bg-[var(--secondary-color)] -translate-y-1/2"></span>
          </h2>
          <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
            <div class="bg-[var(--secondary-color)] p-4 rounded-xl card relative overflow-hidden animate-bounceIn">
              <div class="absolute top-0 right-0 w-16 h-16 bg-[var(--tertiary-color)] rounded-bl-full opacity-50"></div>
              <p class="text-[var(--text-color)] text-sm">Wins</p>
              <p id="wins" class="text-2xl font-bold text-[var(--text-color)]">0</p>
            </div>
            <div class="bg-[var(--secondary-color)] p-4 rounded-xl card relative overflow-hidden animate-bounceIn" style="animation-delay: 0.1s;">
              <div class="absolute top-0 right-0 w-16 h-16 bg-[var(--tertiary-color)] rounded-bl-full opacity-50"></div>
              <p class="text-[var(--text-color)] text-sm">Losses</p>
              <p id="losses" class="text-2xl font-bold text-[var(--text-color)]">0</p>
            </div>
            <div class="bg-[var(--secondary-color)] p-4 rounded-xl card relative overflow-hidden animate-bounceIn" style="animation-delay: 0.2s;">
              <div class="absolute top-0 right-0 w-16 h-16 bg-[var(--tertiary-color)] rounded-bl-full opacity-50"></div>
              <p class="text-[var(--text-color)] text-sm">Win Rate</p>
              <p id="accuracy" class="text-2xl font-bold text-[var(--text-color)]">0%</p>
            </div>
            <div class="bg-[var(--secondary-color)] p-4 rounded-xl card flex items-center justify-between animate-bounceIn" style="animation-delay: 0.3s;">
              <div>
                <p class="text-[var(--text-color)] text-sm">Server Status</p>
                <p class="text-[var(--text-color)] font-semibold">Connected</p>
              </div>
              <div class="w-4 h-4 bg-[var(--primary-color)] rounded-full animate-ping"></div>
            </div>
          </div>
        </div>

        <!-- History Card -->
        <div class="card p-6" id="historyCard">
          <div class="flex justify-between items-center mb-6">
            <h2 class="text-2xl font-bold text-[var(--text-color)] text-center relative">
              <span class="relative z-10">Prediction History</span>
              <span class="absolute top-1/2 left-0 w-full h-1 bg-[var(--secondary-color)] -translate-y-1/2"></span>
            </h2>
            <button id="clearHistoryBtn" class="bg-[var(--primary-color)] text-white px-4 py-2 rounded-lg hover:bg-[var(--tertiary-color)] transition">
              <i class="fas fa-trash mr-2"></i>Clear
            </button>
          </div>
          <div id="historyContainer" class="history-container"></div>
        </div>
      </div>
    </div>

    <!-- Clear History Modal -->
    <div id="clearHistoryModal" class="modal">
      <div class="text-center">
        <h2 class="text-2xl font-bold mb-4 text-[var(--text-color)]">Confirm Clear History</h2>
        <p class="text-gray-600 mb-6">Are you sure you want to clear all prediction history?</p>
        <div class="flex justify-center space-x-4">
          <button id="confirmClear" class="bg-[var(--primary-color)] text-white px-4 py-2 rounded-lg hover:bg-[var(--tertiary-color)] transition">Yes</button>
          <button id="cancelClear" class="bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition">No</button>
        </div>
      </div>
    </div>

    <!-- Theme Selection Modal -->
    <div id="themeModal" class="theme-modal">
      <h2 class="text-2xl font-bold mb-4 text-[var(--text-color)]">Select Theme</h2>
      <div class="theme-options">
        <div class="theme-option" data-theme="default">
          <span style="background: #84cc16"></span>
          <p>Default</p>
        </div>
        <div class="theme-option" data-theme="sunset">
          <span style="background: #ff6b6b"></span>
          <p>Sunset</p>
        </div>
        <div class="theme-option" data-theme="ocean">
          <span style="background: #219ebc"></span>
          <p>Ocean</p>
        </div>
        <div class="theme-option" data-theme="forest">
          <span style="background: #2d6a4f"></span>
          <p>Forest</p>
        </div>
        <div class="theme-option" data-theme="midnight">
          <span style="background: #2c3e50"></span>
          <p>Midnight</p>
        </div>
        <div class="theme-option" data-theme="neon">
          <span style="background: #ff00ff"></span>
          <p>Neon</p>
        </div>
        <div class="theme-option" data-theme="pastel">
          <span style="background: #ffcccb"></span>
          <p>Pastel</p>
        </div>
        <div class="theme-option" data-theme="volcano">
          <span style="background: #d32f2f"></span>
          <p>Volcano</p>
        </div>
        <div class="theme-option" data-theme="cloud">
          <span style="background: #b0c4de"></span>
          <p>Cloud</p>
        </div>
        <div class="theme-option" data-theme="lavender">
          <span style="background: #d8b4fe"></span>
          <p>Lavender</p>
        </div>
        <div class="theme-option" data-theme="citrus">
          <span style="background: #f7e05e"></span>
          <p>Citrus</p>
        </div>
      </div>
      <button id="closeThemeModal" class="bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition mt-4">Close</button>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="settings-modal">
      <h2 class="text-2xl font-bold mb-4 text-[var(--text-color)]">Settings</h2>
      <div class="settings-options">
        <div class="settings-option">
          <i class="fas fa-trophy text-[var(--primary-color)]"></i>
          <p>Total Wins</p>
          <span id="totalWins" class="font-semibold text-[var(--text-color)]">0</span>
        </div>
        <div class="settings-option">
          <i class="fas fa-times-circle text-[var(--tertiary-color)]"></i>
          <p>Total Losses</p>
          <span id="totalLosses" class="font-semibold text-[var(--text-color)]">0</span>
        </div>
        <div class="settings-option" id="langEnglish">
          <i class="fas fa-globe text-[var(--primary-color)]"></i>
          <p>Language: English</p>
          <i class="fas fa-check"></i>
        </div>
        <div class="settings-option" id="langHindi">
          <i class="fas fa-globe text-[var(--primary-color)]"></i>
          <p>Language: Hindi</p>
          <i class="fas fa-ban"></i>
        </div>
        <div class="settings-option" id="notifUnmute">
          <i class="fas fa-bell text-[var(--primary-color)]"></i>
          <p>Notifications: Unmute</p>
          <i class="fas fa-check"></i>
        </div>
        <div class="settings-option" id="notifMute">
          <i class="fas fa-bell-slash text-[var(--primary-color)]"></i>
          <p>Notifications: Mute</p>
          <i class="fas fa-ban"></i>
        </div>
        <div class="settings-option" id="privacyPolicy">
          <i class="fas fa-shield-alt text-[var(--primary-color)]"></i>
          <p>Privacy Policy</p>
          <i class="fas fa-external-link-alt"></i>
        </div>
        <div class="settings-option" id="resetSettings">
          <i class="fas fa-undo text-[var(--primary-color)]"></i>
          <p>Reset Settings</p>
          <i class="fas fa-sync-alt"></i>
        </div>
      </div>
      <button id="closeSettingsModal" class="bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition mt-4">Close</button>
    </div>
  </div>

  <!-- Navigation Bar -->
  <nav class="nav-container">
    <button class="nav-button active" id="homeBtn">
      <i class="fas fa-home"></i>
      <span class="lang-home">Home</span>
    </button>
    <button class="nav-button" id="historyBtn">
      <i class="fas fa-history"></i>
      <span class="lang-history">History</span>
    </button>
    <button class="nav-button" id="themeBtn">
      <i class="fas fa-palette"></i>
      <span class="lang-theme">Theme</span>
    </button>
    <button class="nav-button" id="settingsBtn">
      <i class="fas fa-cog"></i>
      <span class="lang-settings">Settings</span>
    </button>
  </nav>

  <script>
    // Theme Management
    const themes = {
      default: {
        primary: '#84cc16',
        secondary: '#ecfccb',
        tertiary: '#65a30d',
        text: '#1a3c34'
      },
      sunset: {
        primary: '#ff6b6b',
        secondary: '#ffe5d9',
        tertiary: '#d9480f',
        text: '#2b1a10'
      },
      ocean: {
        primary: '#219ebc',
        secondary: '#a3e4ff',
        tertiary: '#126782',
        text: '#023047'
      },
      forest: {
        primary: '#2d6a4f',
        secondary: '#d8f3dc',
        tertiary: '#1b4332',
        text: '#081c15'
      },
      midnight: {
        primary: '#2c3e50',
        secondary: '#ecf0f1',
        tertiary: '#34495e',
        text: '#bdc3c7'
      },
      neon: {
        primary: '#ff00ff',
        secondary: '#1e1e1e',
        tertiary: '#00ffff',
        text: '#ffffff'
      },
      pastel: {
        primary: '#ffcccb',
        secondary: '#f4f1de',
        tertiary: '#81ecec',
        text: '#3d405b'
      },
      volcano: {
        primary: '#d32f2f',
        secondary: '#ffebee',
        tertiary: '#b71c1c',
        text: '#3e2723'
      },
      cloud: {
        primary: '#b0c4de',
        secondary: '#f5faff',
        tertiary: '#6b7280',
        text: '#2d3748'
      },
      lavender: {
        primary: '#d8b4fe',
        secondary: '#f3e8ff',
        tertiary: '#a78bfa',
        text: '#4c1d95'
      },
      citrus: {
        primary: '#f7e05e',
        secondary: '#fffbeb',
        tertiary: '#facc15',
        text: '#3f3f46'
      }
    };

    function applyTheme(themeName) {
      const theme = themes[themeName];
      document.documentElement.style.setProperty('--primary-color', theme.primary);
      document.documentElement.style.setProperty('--secondary-color', theme.secondary);
      document.documentElement.style.setProperty('--tertiary-color', theme.tertiary);
      document.documentElement.style.setProperty('--text-color', theme.text);
      document.body.className = `min-h-screen flex flex-col ${themeName}`;
      playSound();
      showToast(`Theme changed to ${themeName.charAt(0).toUpperCase() + themeName.slice(1)}`);
    }

    // Language Management
    const translations = {
      en: {
        home: "Home",
        history: "History",
        theme: "Theme",
        settings: "Settings",
        period: "Period",
        prediction: "Prediction",
        analysisDashboard: "Analysis Dashboard",
        wins: "Wins",
        losses: "Losses",
        winRate: "Win Rate",
        predictionHistory: "Prediction History",
        clear: "Clear",
        confirmClearHistory: "Confirm Clear History",
        areYouSureClear: "Are you sure you want to clear all prediction history?",
        yes: "Yes",
        no: "No",
        totalWins: "Total Wins",
        totalLosses: "Total Losses",
        languageEnglish: "Language: English",
        languageHindi: "Language: Hindi",
        notificationsUnmute: "Notifications: Unmute",
        notificationsMute: "Notifications: Mute",
        privacyPolicy: "Privacy Policy",
        resetSettings: "Reset Settings"
      },
      hi: {
        home: "होम",
        history: "इतिहास",
        theme: "थीम",
        settings: "सेटिंग्स",
        period: "अवधि",
        prediction: "भविष्यवाणी",
        analysisDashboard: "विश्लेषण डैशबोर्ड",
        wins: "जीत",
        losses: "हार",
        winRate: "जीत दर",
        predictionHistory: "भविष्यवाणी इतिहास",
        clear: "साफ करें",
        confirmClearHistory: "इतिहास साफ करने की पुष्टि करें",
        areYouSureClear: "क्या आप वाकई सभी भविष्यवाणी इतिहास को साफ करना चाहते हैं?",
        yes: "हाँ",
        no: "नहीं",
        totalWins: "कुल जीत",
        totalLosses: "कुल हार",
        languageEnglish: "भाषा: अंग्रेजी",
        languageHindi: "भाषा: हिंदी",
        notificationsUnmute: "सूचनाएँ: अनम्यूट",
        notificationsMute: "सूचनाएँ: म्यूट",
        privacyPolicy: "गोपनीयता नीति",
        resetSettings: "सेटिंग्स रीसेट करें"
      }
    };

    let currentLanguage = 'en';
    let isMuted = false;

    function applyLanguage(lang) {
      currentLanguage = lang;
      document.querySelectorAll('[class*="lang-"]').forEach(element => {
        const key = element.className.match(/lang-(\w+)/)[1];
        element.textContent = translations[lang][key];
      });
      document.querySelector('#langEnglish i:last-child').className = lang === 'en' ? 'fas fa-check' : 'fas fa-ban';
      document.querySelector('#langHindi i:last-child').className = lang === 'hi' ? 'fas fa-check' : 'fas fa-ban';
      document.querySelector('#currentPeriod').previousElementSibling.querySelector('h2').textContent = translations[lang].period;
      document.querySelector('#currentPrediction').previousElementSibling.querySelector('h2').textContent = translations[lang].prediction;
      document.querySelector('#dashboardCard h2 span').textContent = translations[lang].analysisDashboard;
      document.querySelector('#historyCard h2 span').textContent = translations[lang].predictionHistory;
      document.querySelector('#clearHistoryBtn').innerHTML = `<i class="fas fa-trash mr-2"></i>${translations[lang].clear}`;
      document.querySelector('#clearHistoryModal h2').textContent = translations[lang].confirmClearHistory;
      document.querySelector('#clearHistoryModal p').textContent = translations[lang].areYouSureClear;
      document.querySelector('#confirmClear').textContent = translations[lang].yes;
      document.querySelector('#cancelClear').textContent = translations[lang].no;
      document.querySelector('#totalWins').previousElementSibling.textContent = translations[lang].totalWins;
      document.querySelector('#totalLosses').previousElementSibling.textContent = translations[lang].totalLosses;
      document.querySelector('#langEnglish p').textContent = translations[lang].languageEnglish;
      document.querySelector('#langHindi p').textContent = translations[lang].languageHindi;
      document.querySelector('#notifUnmute p').textContent = translations[lang].notificationsUnmute;
      document.querySelector('#notifMute p').textContent = translations[lang].notificationsMute;
      document.querySelector('#privacyPolicy p').textContent = translations[lang].privacyPolicy;
      document.querySelector('#resetSettings p').textContent = translations[lang].resetSettings;
      playSound();
      showToast(`Language changed to ${lang === 'en' ? 'English' : 'Hindi'}`);
    }

    // Sound Management
    const clickSound = new Audio('https://assets.mixkit.co/active_storage/sfx/2568/2568-preview.mp3');

    function playSound() {
      if (!isMuted) {
        clickSound.play().catch(e => console.error('Sound play error:', e));
      }
    }

    // Navigation Functionality
    const navButtons = document.querySelectorAll('.nav-button');
    const mainContent = document.getElementById('mainContent');
    const predictionCard = document.getElementById('predictionCard');
    const dashboardCard = document.getElementById('dashboardCard');
    const historyCard = document.getElementById('historyCard');
    const settingsModal = document.getElementById('settingsModal');

    function setActiveNav(button) {
      navButtons.forEach(btn => btn.classList.remove('active'));
      button.classList.add('active');
    }

    navButtons.forEach(button => {
      button.addEventListener('click', () => {
        button.classList.remove('bounce', 'pulse', 'tada', 'swing');
        if (button.id === 'homeBtn') {
          button.classList.add('bounce');
        } else if (button.id === 'historyBtn') {
          button.classList.add('pulse');
        } else if (button.id === 'themeBtn') {
          button.classList.add('tada');
        } else if (button.id === 'settingsBtn') {
          button.classList.add('swing');
          playSound();
        }
        setTimeout(() => {
          button.classList.remove('bounce', 'pulse', 'tada', 'swing');
        }, 600);

        setActiveNav(button);
        const id = button.id;

        predictionCard.classList.add('hidden');
        dashboardCard.classList.add('hidden');
        historyCard.classList.add('hidden');
        themeModal.style.display = 'none';
        settingsModal.style.display = 'none';

        if (id === 'homeBtn') {
          predictionCard.classList.remove('hidden');
          dashboardCard.classList.remove('hidden');
          historyCard.classList.remove('hidden');
          mainContent.scrollIntoView({ behavior: 'smooth' });
        } else if (id === 'historyBtn') {
          historyCard.classList.remove('hidden');
          historyCard.scrollIntoView({ behavior: 'smooth' });
        } else if (id === 'themeBtn') {
          document.getElementById('themeModal').style.display = 'block';
        } else if (id === 'settingsBtn') {
          settingsModal.style.display = 'block';
        }
      });
    });

    // Theme Modal Handling
    const themeModal = document.getElementById('themeModal');
    const themeOptions = document.querySelectorAll('.theme-option');
    const closeThemeModal = document.getElementById('closeThemeModal');

    themeOptions.forEach(option => {
      option.addEventListener('click', () => {
        const theme = option.getAttribute('data-theme');
        applyTheme(theme);
        themeModal.style.display = 'none';
      });
    });

    closeThemeModal.addEventListener('click', () => {
      playSound();
      themeModal.style.display = 'none';
    });

    // Settings Modal Handling
    const closeSettingsModal = document.getElementById('closeSettingsModal');
    closeSettingsModal.addEventListener('click', () => {
      playSound();
      settingsModal.style.display = 'none';
    });

    document.getElementById('langEnglish').addEventListener('click', () => {
      applyLanguage('en');
      playSound();
    });

    document.getElementById('langHindi').addEventListener('click', () => {
      applyLanguage('hi');
      playSound();
    });

    document.getElementById('notifUnmute').addEventListener('click', () => {
      isMuted = false;
      document.querySelector('#notifUnmute i:last-child').className = 'fas fa-check';
      document.querySelector('#notifMute i:last-child').className = 'fas fa-ban';
      playSound();
      showToast(translations[currentLanguage].notificationsUnmute);
    });

    document.getElementById('notifMute').addEventListener('click', () => {
      isMuted = true;
      document.querySelector('#notifUnmute i:last-child').className = 'fas fa-ban';
      document.querySelector('#notifMute i:last-child').className = 'fas fa-check';
      showToast(translations[currentLanguage].notificationsMute);
    });

    document.getElementById('privacyPolicy').addEventListener('click', () => {
      playSound();
      showToast('Privacy Policy will be available soon!');
    });

    document.getElementById('resetSettings').addEventListener('click', () => {
      applyLanguage('en');
      isMuted = false;
      document.querySelector('#notifUnmute i:last-child').className = 'fas fa-check';
      document.querySelector('#notifMute i:last-child').className = 'fas fa-ban';
      applyTheme('default');
      playSound();
      showToast('Settings reset to default');
    });

    // Existing JavaScript Logic
    let historyData = [];
    let lastFetchedPeriod = null;
    let lastResult = null;
    let lastPrediction = null;
    let lastStatus = null;
    let lastOppositeNumber = null;
    let globalPrediction = null;
    let streak = 0;
    let winLevel = 0;
    let consecutiveLosses = 0;
    const MAX_WIN_LEVEL = 3;

    function getOppositeNumber(prediction) {
      const small = [0, 1, 2, 3, 4];
      const big = [5, 6, 7, 8, 9];
      let arr = prediction === "BIG" ? small : big;
      return arr[Math.floor(Math.random() * arr.length)];
    }

    function neuralNetworkPrediction(recent) {
      const bigCount = recent.filter(r => r.resultType === "BIG").length;
      const smallCount = recent.length - bigCount;
      let lastType = recent[0].resultType;
      let streakLength = 1;
      for (let i = 1; i < recent.length; i++) {
        if (recent[i].resultType === lastType) {
          streakLength++;
        } else {
          break;
        }
      }
      if (streakLength >= 3) {
        return {
          prediction: lastType === "BIG" ? "SMALL" : "BIG",
          confidence: 80,
          logic: 19
        };
      }
      if (bigCount / recent.length > 0.6) {
        return {
          prediction: "SMALL",
          confidence: 75,
          logic: 19
        };
      } else if (smallCount / recent.length > 0.6) {
        return {
          prediction: "BIG",
          confidence: 75,
          logic: 19
        };
      }
      return {
        prediction: bigCount > smallCount ? "SMALL" : "BIG",
        confidence: 70,
        logic: 19
      };
    }

    function fibonacciPrediction(recent) {
      const levels = [0, 0.236, 0.382, 0.5, 0.618, 0.786, 1];
      const bigCount = recent.filter(r => r.resultType === "BIG").length;
      const ratio = bigCount / recent.length;
      let closestLevel = levels.reduce((prev, curr) => {
        return (Math.abs(curr - ratio) < Math.abs(prev - ratio) ? curr : prev);
      });
      if (ratio > 0.618) {
        return {
          prediction: "SMALL",
          confidence: 75,
          logic: 25
        };
      } else if (ratio < 0.382) {
        return {
          prediction: "BIG",
          confidence: 75,
          logic: 25
        };
      } else {
        return {
          prediction: recent[0].resultType === "BIG" ? "SMALL" : "BIG",
          confidence: 70,
          logic: 25
        };
      }
    }

    function machineLearningPrediction(recent) {
      const bigCount = recent.filter(r => r.resultType === "BIG").length;
      const smallCount = recent.length - bigCount;
      let lastType = recent[0].resultType;
      let streakLength = 1;
      for (let i = 1; i < recent.length; i++) {
        if (recent[i].resultType === lastType) {
          streakLength++;
        } else {
          break;
        }
      }
      let alternating = true;
      for (let i = 1; i < Math.min(6, recent.length); i++) {
        if ((recent[i-1].resultType === "BIG" && recent[i].resultType !== "SMALL") ||
            (recent[i-1].resultType === "SMALL" && recent[i].resultType !== "BIG")) {
          alternating = false;
          break;
        }
      }
      if (streakLength >= 3) {
        return {
          prediction: lastType === "BIG" ? "SMALL" : "BIG",
          confidence: 85,
          logic: 28
        };
      } else if (alternating) {
        return {
          prediction: recent[recent.length-1].resultType === "BIG" ? "SMALL" : "BIG",
          confidence: 80,
          logic: 28
        };
      } else if (bigCount / recent.length > 0.6) {
        return {
          prediction: "SMALL",
          confidence: 78,
          logic: 28
        };
      } else if (smallCount / recent.length > 0.6) {
        return {
          prediction: "BIG",
          confidence: 78,
          logic: 28
        };
      } else {
        return {
          prediction: bigCount > smallCount ? "SMALL" : "BIG",
          confidence: 75,
          logic: 28
        };
      }
    }

    function ultraAIPredict(history) {
      if (history.length < 3) {
        return { prediction: Math.random() > 0.5 ? "BIG" : "SMALL", confidence: 0.35 + Math.random() * (1 - 0.35), logic: 0 };
      }

      let activePatterns = [];
      const recent = history.filter(h => h.resultType !== "-").slice(0, 10);
      const predictions = [];

      let lastStreakType = recent[0].resultType;
      let streakLength = 1;
      for (let i = 1; i < recent.length; i++) {
        if (recent[i].resultType === lastStreakType) {
          streakLength++;
        } else {
          break;
        }
      }
      if (streakLength >= 3) {
        activePatterns.push("Streak of " + streakLength);
        predictions.push({
          prediction: lastStreakType === "BIG" ? "SMALL" : "BIG",
          confidence: Math.min(90, 70 + (streakLength * 5)),
          logic: 1
        });
      }

      let alternating = true;
      for (let i = 1; i < Math.min(6, recent.length); i++) {
        if ((recent[i-1].resultType === "BIG" && recent[i].resultType !== "SMALL") ||
            (recent[i-1].resultType === "SMALL" && recent[i].resultType !== "BIG")) {
          alternating = false;
          break;
        }
      }
      if (alternating && recent.length >= 4) {
        activePatterns.push("Alternating pattern");
        predictions.push({
          prediction: recent[recent.length-1].resultType === "BIG" ? "SMALL" : "BIG",
          confidence: 80,
          logic: 3
        });
      }

      if (recent.length >= 5) {
        const lastThree = recent.slice(0, 3);
        if (lastThree[0].resultType === lastThree[1].resultType &&
            lastThree[0].resultType === lastThree[2].resultType) {
          activePatterns.push("Triple pattern");
          predictions.push({
            prediction: lastThree[0].resultType === "BIG" ? "SMALL" : "BIG",
            confidence: 85,
            logic: 5
          });
        }
      }

      const lookback = Math.min(15, recent.length);
      const bigCount = recent.slice(0, lookback).filter(r => r.resultType === "BIG").length;
      const smallCount = lookback - bigCount;
      const bigPercent = (bigCount / lookback) * 100;
      if (Math.abs(bigPercent - 50) > 20) {
        activePatterns.push("Weighted probability");
        predictions.push({
          prediction: bigPercent > 50 ? "SMALL" : "BIG",
          confidence: Math.min(90, Math.abs(bigPercent - 50) + 40),
          logic: 8
        });
      }

      if (consecutiveLosses >= 2) {
        activePatterns.push("Loss recovery");
        predictions.push({
          prediction: lastPrediction === "BIG" ? "SMALL" : "BIG",
          confidence: 75 + (consecutiveLosses * 5),
          logic: 22
        });
      }

      if (recent.length >= 4) {
        if (recent[0].resultType === recent[2].resultType &&
            recent[1].resultType === recent[3].resultType) {
          activePatterns.push("Mirror pattern");
          predictions.push({
            prediction: recent[1].resultType === "BIG" ? "SMALL" : "BIG",
            confidence: 75,
            logic: 6
          });
        }
      }

      if (recent.length >= 8) {
        const nnPrediction = neuralNetworkPrediction(recent);
        if (nnPrediction.confidence > 70) {
          activePatterns.push("AI detected");
          predictions.push(nnPrediction);
        }
      }

      if (recent.length >= 8) {
        const fibPrediction = fibonacciPrediction(recent);
        if (fibPrediction.confidence > 65) {
          activePatterns.push("Fibonacci pattern");
          predictions.push(fibPrediction);
        }
      }

      if (recent.length >= 10) {
        const mlPrediction = machineLearningPrediction(recent);
        if (mlPrediction.confidence > 75) {
          activePatterns.push("ML detected");
          predictions.push(mlPrediction);
        }
      }

      if (predictions.length === 0) {
        if (recent.length >= 2 && recent[0].resultType === recent[1].resultType) {
          predictions.push({
            prediction: recent[0].resultType === "BIG" ? "SMALL" : "BIG",
            confidence: 65,
            logic: 4
          });
        } else {
          predictions.push({
            prediction: recent[0].resultType === "BIG" ? "SMALL" : "BIG",
            confidence: 60,
            logic: 12
          });
        }
      }

      let bestPrediction = predictions[0];
      for (let i = 1; i < predictions.length; i++) {
        if (predictions[i].confidence > bestPrediction.confidence) {
          bestPrediction = predictions[i];
        }
      }

      if (winLevel >= MAX_WIN_LEVEL) {
        bestPrediction.prediction = bestPrediction.prediction === "BIG" ? "SMALL" : "BIG";
        bestPrediction.confidence = 0.35;
        winLevel = 0;
      }

      return bestPrediction;
    }

    function updateLastStatus(actualNumber) {
      const match = actualNumber == lastOppositeNumber || (actualNumber >= 5 ? 'BIG' : 'SMALL') === lastPrediction;
      lastResult = actualNumber >= 5 ? 'BIG' : 'SMALL';
      lastStatus = match ? 'WIN' : 'LOSS';

      if (match) {
        winLevel = Math.min(winLevel + 1, MAX_WIN_LEVEL);
        streak = streak + 1;
        consecutiveLosses = 0;
      } else {
        winLevel = 0;
        streak = 0;
        consecutiveLosses++;
      }

      return lastStatus;
    }

    async function fetchGameResult() {
      try {
        let response = await fetch("https://api.bdg88zf.com/api/webapi/GetNoaverageEmerdList", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            pageSize: 10,
            pageNo: 1,
            typeId: 1,
            language: 0,
            random: "4a0522c6ecd8410496260e686be2a57c",
            signature: "334B5E70A0C9B8918B0B15E517E2069C",
            timestamp: Math.floor(Date.now() / 1000)
          })
        });
        let data = await response.json();
        return data?.data?.list?.[0] || null;
      } catch (e) {
        console.error("API Error", e);
        return null;
      }
    }

    function showToast(message) {
      if (!isMuted) {
        const toast = document.createElement("div");
        toast.className = "toast";
        toast.innerText = message;
        document.body.appendChild(toast);
        setTimeout(() => toast.remove(), 3000);
      }
    }

    async function updatePrediction() {
      let result = await fetchGameResult();
      if (!result || result.issueNumber === lastFetchedPeriod) return;

      if (historyData.length > 0 && historyData[0].resultStatus === "Pending") {
        const actualNumber = Number(result.number);
        const status = updateLastStatus(actualNumber);
        const resultType = actualNumber >= 5 ? "BIG" : "SMALL";

        historyData[0].result = actualNumber;
        historyData[0].resultStatus = status;
        historyData[0].resultType = resultType;
        historyData[0].calculation = `Number ${actualNumber} (${resultType})`;

        updateHistory();
        updateStats();
      }

      const aiDecision = ultraAIPredict(historyData);
      lastPrediction = aiDecision.prediction;
      lastOppositeNumber = getOppositeNumber(lastPrediction);
      globalPrediction = lastPrediction;

      let nextPeriodFull = (BigInt(result.issueNumber) + 1n).toString();
      let nextPeriod = nextPeriodFull.slice(-4);

      document.getElementById("currentPeriod").textContent = nextPeriod;
      document.getElementById("currentPrediction").textContent = globalPrediction || '-';

      historyData.unshift({
        period: nextPeriod,
        prediction: globalPrediction,
        oppositeNumber: lastOppositeNumber,
        result: "-",
        resultStatus: "Pending",
        resultType: "-",
        calculation: "-"
      });

      updateHistory();
      updateStats();
      lastFetchedPeriod = result.issueNumber;
    }

    function updateHistory() {
      const container = document.getElementById("historyContainer");
      container.innerHTML = historyData.map((item, index) => `
        <div class="history-item bg-[var(--secondary-color)] p-4 rounded-xl border border-[var(--tertiary-color)] flex flex-col md:flex-row justify-between items-start md:items-center animate-bounceIn" 
             data-index="${index}" 
             style="animation-delay: ${index * 0.1}s;">
          <div class="flex items-center space-x-3 mb-2 md:mb-0">
            <div class="w-10 h-10 bg-[var(--tertiary-color)] rounded-full flex items-center justify-center">
              <i class="fas fa-calendar-alt text-[var(--primary-color)]"></i>
            </div>
            <div>
              <p class="text-[var(--text-color)] text-sm">${translations[currentLanguage].period}</p>
              <p class="font-semibold text-[var(--text-color)]">${item.period?.slice(-5) || '-'}</p>
            </div>
          </div>
          <div class="flex items-center space-x-3">
            <div class="text-center">
              <p class="text-[var(--text-color)] text-sm">${translations[currentLanguage].prediction}</p>
              <p class="font-semibold text-[var(--text-color)]">${item.prediction || '-'}</p>
            </div>
            <div class="w-10 h-10 rounded-full flex items-center justify-center
              ${item.resultStatus === 'WIN' ? 'bg-green-100' : item.resultStatus === 'LOSS' ? 'bg-red-100' : 'bg-yellow-100'}">
              <i class="fas ${item.resultStatus === 'WIN' ? 'fa-check-circle text-green-500 win-animation' : 
                            item.resultStatus === 'LOSS' ? 'fa-times-circle text-red-500 loss-animation' : 
                            'fa-clock text-yellow-500 animate-spin'}"></i>
            </div>
            <button class="delete-btn transition" data-index="${index}">
              <i class="fas fa-trash"></i>
            </button>
          </div>
        </div>
      `).join("");

      document.querySelectorAll('.delete-btn').forEach(button => {
        button.removeEventListener('click', handleDelete);
        button.addEventListener('click', () => {
          handleDelete(button);
          playSound();
        });
      });
    }

    function updateStats() {
      const wins = historyData.filter(item => item.resultStatus === "WIN").length;
      const losses = historyData.filter(item => item.resultStatus === "LOSS").length;
      const total = wins + losses;
      const accuracy = total > 0 ? ((wins / total) * 100).toFixed(2) : 0;

      document.getElementById("wins").textContent = wins;
      document.getElementById("losses").textContent = losses;
      document.getElementById("accuracy").textContent = `${accuracy}%`;
      document.getElementById("totalWins").textContent = wins;
      document.getElementById("totalLosses").textContent = losses;
    }

    function handleDelete(button) {
      const index = parseInt(button.getAttribute('data-index'));
      historyData.splice(index, 1);
      showToast("Deleted successfully");
      updateHistory();
      updateStats();
    }

    function showClearHistoryModal() {
      document.getElementById("clearHistoryModal").style.display = 'block';
      playSound();
    }

    function hideClearHistoryModal() {
      document.getElementById("clearHistoryModal").style.display = 'none';
      playSound();
    }

    function confirmClearHistory() {
      clearHistory();
      showToast("All history deleted successfully");
      hideClearHistoryModal();
    }

    function clearHistory() {
      historyData = [];
      streak = 0;
      winLevel = 0;
      consecutiveLosses = 0;
      updateHistory();
      updateStats();
    }

    document.addEventListener('DOMContentLoaded', function() {
      updateHistory();
      updateStats();
      applyTheme('default');
      applyLanguage('en');

      const clearHistoryBtn = document.getElementById('clearHistoryBtn');
      const clearHistoryModal = document.getElementById('clearHistoryModal');
      const confirmClear = document.getElementById('confirmClear');
      const cancelClear = document.getElementById('cancelClear');

      clearHistoryBtn.addEventListener('click', () => {
        showClearHistoryModal();
      });

      confirmClear.addEventListener('click', async () => {
        await clearHistory();
        playSound();
        clearHistoryModal.style.display = 'none';
      });

      cancelClear.addEventListener('click', () => {
        playSound();
        clearHistoryModal.style.display = 'none';
      });

      setActiveNav(document.getElementById('homeBtn'));
    });

    setInterval(updatePrediction, 5000);
  </script>
</body>
</html>